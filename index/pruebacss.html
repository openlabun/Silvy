<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generador JSON</title>

  <link rel="stylesheet" href="estilo.css" />
  <link rel="json" href="funciones.json" />
  <link rel="shortcut icon" href="img/code.png">

</head>

<body>
  <div id="container">

    <header>
      <img src="img/icon5.png" alt="clarkode logo" class="imgLogo">
    </header>

    <div class="article">
      <h2>Crear Objeto:</h2>
      <!-- Formulario para agregar nuevos objetos JSON -->
      <form id="json-form">
        <div id="campos">
          <!-- Los campos se agregaran aquí -->

        </div>
        <button type="button" id="agregarC" onclick="agregarCampo()">
          Agregar campo
        </button>
        <button type="submit" id="agregarO">Agregar objeto</button>
      </form>

      <h2>Generar automáticamente:</h2>
      <!-- Campo y botón para generar múltiples objetos -->
      <input type="number" id="cantidad-objetos" placeholder="Cantidad de objetos" min="1" />
      <button id="generarObjetos" onclick="generarObjetos()">Generar Objetos

      </button>

      <!-- Botón para guardar JSON en disco (esto descargará un archivo) -->

      <button id="guardarDisco" onclick="guardarEnDisco()">Guardar en disco</button>

      <!-- Contenedor para mostrar el JSON generado -->
      <h2>Salida:</h2>
      <button id="delete-json-btn">Borrar JSON</button>
      <button id="ctrl-z-btn">Ctrl + Z</button>
      <pre id="json-output"></pre>

      <script>
        var nombresFicticios = [
          "Aiden",
          "Alana",
          "Alden",
          "Alexis",
          "Alvin",
          "Amelia",
          "Anika",
          "Archer",
          "Ariana",
          "Ariel",
          "Armando",
          "Arthur",
          "Ashley",
          "Ashton",
          "Aubrey",
          "Audrey",
          "Austin",
          "Autumn",
          "Avery",
          "Axel",
          "Bailey",
          "Barrett",
          "Beckett",
          "Bella",
          "Bennett",
          "Bethany",
          "Bianca",
          "Blaine",
          "Blake",
          "Blaze",
          "Brendan",
          "Brenna",
          "Brett",
          "Brianna",
          "Bridget",
          "Brinley",
          "Brock",
          "Brody",
          "Brooke",
          "Bryant",
          "Brynn",
          "Bryson",
          "Cadence",
          "Caiden",
          "Caleb",
          "Callie",
          "Calvin",
          "Camden",
          "Cameron",
          "Camila",
          "Camille",
          "Cara",
          "Carlos",
          "Carmen",
          "Carter",
          "Cassandra",
          "Cecilia",
          "Cedric",
          "Celeste",
          "Cesar",
          "Chad",
          "Chandler",
          "Chanel",
          "Charity",
          "Charles",
          "Charlie",
          "Charlotte",
          "Chase",
          "Chaya",
          "Chelsea",
          "Cherish",
          "Cheyenne",
          "Chloe",
          "Chris",
          "Christian",
          "Christina",
          "Christine",
          "Christopher",
          "Ciara",
          "Cindy",
          "Claire",
          "Clara",
          "Clarence",
          "Clarissa",
          "Clark",
          "Claudia",
          "Clay",
          "Clayton",
          "Cleo",
          "Clifford",
          "Clint",
          "Clinton",
          "Clyde",
          "Coby",
          "Cody",
          "Colette",
          "Colby",
          "Cole",
          "Colette",
          "Colin",
          "Colleen",
          "Colt",
          "Colton",
        ];

        var apellidosFicticios = [
          "Abbar",
          "Bennett",
          "Calderon",
          "Dennison",
          "Eldridge",
          "Falcon",
          "Gallagher",
          "Hendrix",
          "Ibarra",
          "Jennings",
          "Kramer",
          "Lancaster",
          "Maddox",
          "Nixon",
          "Overton",
          "Parrish",
          "Quillen",
          "Ramsey",
          "Sanderson",
          "Thacker",
          "Underwood",
          "Vaughn",
          "Waldron",
          "Xander",
          "Yardley",
          "Zimmerman",
          "Alton",
          "Baxter",
          "Caldwell",
          "Dexter",
          "Ellison",
          "Fairchild",
          "Grafton",
          "Hawthorne",
          "Ingram",
          "Jefferson",
          "Kendrick",
          "Lawson",
          "Masterson",
          "Norwood",
          "Oakley",
          "Prescott",
          "Quincy",
          "Redfield",
          "Sherwood",
          "Tanner",
          "Upton",
          "Vance",
          "Waverly",
          "Xavier",
          "Yeager",
          "Zane",
          "Alcott",
          "Barrington",
          "Carrington",
          "Dalton",
          "Eaton",
          "Farnsworth",
          "Garfield",
          "Harrington",
          "Iverson",
          "Jenner",
          "Kensington",
          "Lancaster",
          "Masterson",
          "Noble",
          "Overstreet",
          "Patterson",
          "Quincy",
          "Radcliffe",
          "Satterfield",
          "Trenton",
          "Upton",
          "Vanderbilt",
          "Warwick",
          "Xenos",
          "Yeager",
          "Zephyr",
          "Aldridge",
          "Baxter",
          "Colton",
          "Dewitt",
          "Eldridge",
          "Fairfax",
          "Gainsborough",
          "Hawthorne",
          "Inglewood",
          "Jennings",
          "Kingsley",
          "Lawrence",
          "Merton",
          "Northwood",
          "Oglesby",
          "Pennington",
          "Quill",
          "Ridgeway",
          "Somerset",
          "Tillman",
          "Underhill",
          "Vernon",
          "Wainwright",
          "Xander",
          "Yates",
          "Zimmer",
          "Allerton",
          "Bradford",
          "Clifton",
          "Dudley",
          "Ellsworth",
        ];

        var objetos = [];

        function eliminarCampo(boton) {
          var campoDiv = boton.parentElement;
          campoDiv.parentElement.removeChild(campoDiv);
        }

        function generarNombreAleatorio() {
          var nombre =
            nombresFicticios[
            Math.floor(Math.random() * nombresFicticios.length)
            ];
          var apellido =
            apellidosFicticios[
            Math.floor(Math.random() * apellidosFicticios.length)
            ];
          return nombre + " " + apellido;
        }

        function agregarCampo() {
          var camposDiv = document.getElementById("campos");
          var nuevoCampoDiv = document.createElement("div");
          nuevoCampoDiv.className = "campo";

          // Crear y agregar el input para la clave
          var claveInput = document.createElement("input");
          claveInput.type = "text";
          claveInput.placeholder = "Nombre del dato";
          claveInput.required = true;
          claveInput.className = "input-clave"; // Asignar clase para CSS
          nuevoCampoDiv.appendChild(claveInput);

          // Crear y agregar el input para el valor
          var valorInput = document.createElement("input");
          valorInput.type = "text";
          valorInput.placeholder = "Valor del dato";
          valorInput.required = true;
          valorInput.className = "input-valor"; // Asignar clase para CSS
          nuevoCampoDiv.appendChild(valorInput);

          // Crear y agregar el botón de eliminar
          var eliminarBoton = document.createElement("button");
          eliminarBoton.type = "button";
          eliminarBoton.textContent = "Eliminar";
          eliminarBoton.className = "boton-eliminar"; // Asignar clase para CSS
          eliminarBoton.addEventListener("click", function () {
            eliminarCampo(eliminarBoton);
          });
          nuevoCampoDiv.appendChild(eliminarBoton);

          camposDiv.appendChild(nuevoCampoDiv);
        }


        document.getElementById("json-form").addEventListener("submit", function (e) {
          e.preventDefault();
          var camposDivs = document.querySelectorAll(".campo");
          var objeto = {};
          camposDivs.forEach(function (campoDiv) {
            var claveInput = campoDiv.children[0];
            var valorInput = campoDiv.children[1];
            objeto[claveInput.value] = valorInput.value;
          });
          objetos.unshift(objeto); // Agrega el objeto al principio del arreglo
          document.getElementById("json-output").textContent = JSON.stringify(objetos, null, 2);

          // Este pedazo resetea el formulario 
          var form = document.getElementById('json-form');
          form.reset();
        });

        function generarObjetos() {
          var cantidad =
            document.getElementById("cantidad-objetos").value;
          for (var i = 0; i < cantidad; i++) {
            var objeto = {
              nombre: generarNombreAleatorio(),
              edad: Math.floor(Math.random() * 100),
              casado: Math.random() < 0.5,
            };
            objetos.push(objeto);
          }
          document.getElementById("json-output").textContent =
            JSON.stringify(objetos, null, 2);
        }

        // Función para deshacer al último cambio
        document.getElementById('ctrl-z-btn').addEventListener('click', function () {
          if (objetos.length > 0) {
            objetos.shift(); // Elimina el último objeto del arreglo
            document.getElementById("json-output").textContent = JSON.stringify(objetos, null, 2);
          }
        });

        //Agrega un campo al cargar completamente la pagina
        window.addEventListener('load', function () {
          agregarCampo();
        });

        //Esto es para resetear el Json
        document.getElementById('delete-json-btn').addEventListener('click', function () {
          document.getElementById('json-output').textContent = '';
          objetos = [];
        });

        function guardarEnDisco() {
          var jsonStr = JSON.stringify(objetos, null, 2);
          var blob = new Blob([jsonStr], { type: "application/json" });
          var url = URL.createObjectURL(blob);
          var a = document.createElement("a");
          a.href = url;
          a.download = "salida.json";
          a.click();
          URL.revokeObjectURL(url);
        }
      </script>

    </div>

    <footer></footer>

  </div>

</body>

</html>
